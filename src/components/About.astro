---
import { Icon } from "astro-icon/components";
---

<section
    id="about"
    class="about-race relative min-h-screen py-16 bg-gradient-to-tr from-primary-900 via-primary-500 to-secondary-500 overflow-hidden"
>
    <!-- Grid pattern overlay -->
    <div
        class="absolute inset-0 opacity-5"
        style="background-image: radial-gradient(circle, #ffffff 1px, transparent 1px); background-size: 50px 50px;"
    >
    </div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header Section -->
        <div class="text-center mb-16">
            <div
                class="inline-flex items-center px-4 py-2 rounded-full bg-secondary-500/10 border border-secondary-500/20 mb-6"
            >
                <Icon
                    name="tabler/heart"
                    class="w-5 h-5 text-secondary-400 mr-2"
                />
                <span class="text-secondary-400 text-sm font-medium"
                    >Nuestra Historia</span
                >
            </div>
            <h1
                class="font-nova text-5xl md:text-7xl lg:text-8xl text-white mb-6 tracking-tight"
            >
                <span class="text-white bg-clip-text text-transparent">
                    Sobre la Carrera
                </span>
            </h1>
            <p class="text-white text-xl max-w-2xl mx-auto leading-relaxed">
                Descubre la magia detrás de la 15K URRAO y la belleza natural
                que hace de este evento algo único.
            </p>
        </div>

        <!-- Main Content Grid -->
        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <!-- Text Content -->
            <div class="space-y-8 relative">
                <div
                    class="absolute inset-0 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-lg rounded-3xl border border-white/10 transition-all duration-500 group-hover:border-orange-500/30 group-hover:shadow-2xl group-hover:shadow-orange-500/10"
                >
                </div>

                <!-- About Card 1 -->
                <div class="group relative">
                    <div class="relative px-8 py-4">
                        <div class="flex items-center space-x-4 mb-2">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg"
                            >
                                <Icon
                                    name="tabler/calendar-check"
                                    class="size-8 text-white"
                                />
                            </div>
                            <h3 class="text-white text-2xl font-semibold">
                                Fecha del Evento
                            </h3>
                        </div>
                        <p class="text-white text-lg leading-relaxed">
                            El <span class="text-orange-400 font-semibold"
                                >12 de octubre de 2025</span
                            >, Urrao, Antioquia, será nuevamente el escenario de
                            la 15K URRAO, una carrera que nació en 2024 para
                            fomentar el deporte, los hábitos saludables y la
                            conexión con la naturaleza.
                        </p>
                    </div>
                </div>

                <!-- About Card 2 -->
                <div class="group relative">
                    <div class="relative px-8 py-4">
                        <div class="flex items-center space-x-4 mb-6">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"
                            >
                                <Icon
                                    name="tabler/tree"
                                    class="size-8 text-white"
                                />
                            </div>
                            <h3 class="text-white text-2xl font-semibold">
                                Conservación Ambiental
                            </h3>
                        </div>
                        <p class="text-white text-lg leading-relaxed">
                            Tras el éxito de su primera edición, este evento se
                            consolida como una experiencia única, con distancias
                            de 10 y 15 kilómetros que atraviesan la <span
                                class="text-blue-300 font-semibold"
                                >riqueza natural más impresionante de Urrao</span
                            >. La ruta incluye el <span
                                class="text-blue-300 font-semibold"
                                >valle del río Penderisco</span
                            > y vistas del majestuoso <span
                                class="text-blue-300 font-semibold"
                                >Páramo del Sol</span
                            >, donde se encuentran <span
                                class="text-blue-300 font-semibold"
                                >frailejones centenarios, lagunas cristalinas y
                                una biodiversidad única</span
                            > que solo existe en esta región del mundo.
                        </p>
                    </div>
                </div>

                <!-- About Card 3 -->
                <div class="group relative">
                    <div class="relative px-8 py-4">
                        <div class="flex items-center space-x-4 mb-6">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg"
                            >
                                <Icon
                                    name="tabler/users"
                                    class="size-8 text-white"
                                />
                            </div>
                            <h3 class="text-white text-2xl font-semibold">
                                Propósito Comunitario
                            </h3>
                        </div>
                        <p class="text-white text-lg leading-relaxed">
                            Organizada sin ánimo de lucro, la carrera busca
                            promover el running, fortalecer el sentido de
                            comunidad y
                            <span class="text-green-300 font-semibold"
                                >concientizar sobre la conservación de esta
                                riqueza natural</span
                            >. Urrao alberga <span
                                class="text-green-300 font-semibold"
                                >más de 200 especies de aves y cientos de
                                plantas endémicas</span
                            >
                            que <span class="text-green-300 font-semibold"
                                >no existen en ningún otro lugar del planeta</span
                            >. ¡Únete a esta gran aventura y descubre por qué
                            Urrao es un tesoro natural que debemos proteger!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Image Slideshow -->
            <div class="relative">
                <div
                    class="group relative h-[700px] rounded-3xl overflow-hidden shadow-2xl"
                >
                    <!-- Slideshow Container -->
                    <div id="slideshow-container" class="relative h-full">
                        <!-- Slide 1 -->
                        <div
                            class="slide absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-100"
                        >
                            <img
                                src="/corpo/WhatsApp Image 2025-08-30 at 13.43.26.jpeg"
                                alt="Paisaje de Urrao - Valle del río Penderisco"
                                class="w-auto h-full object-contain mx-auto p-4 rounded-3xl"
                            />
                        </div>

                        <!-- Slide 2 -->
                        <div
                            class="slide absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0"
                        >
                            <img
                                src="/corpo/WhatsApp Image 2025-08-30 at 13.43.26 (1).jpeg"
                                alt="Paisaje de Urrao - Montañas"
                                class="w-auto h-full object-contain mx-auto p-4 rounded-3xl"
                            />
                        </div>

                        <!-- Slide 3 -->
                        <div
                            class="slide absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0"
                        >
                            <img
                                src="/corpo/WhatsApp Image 2025-08-30 at 13.43.26 (2).jpeg"
                                alt="Paisaje de Urrao - Naturaleza"
                                class="w-auto h-full object-contain mx-auto p-4 rounded-3xl"
                            />
                        </div>

                        <!-- Slide 4 -->
                        <div
                            class="slide absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0"
                        >
                            <img
                                src="/corpo/WhatsApp Image 2025-08-30 at 13.43.26 (3).jpeg"
                                alt="Paisaje de Urrao - Páramo"
                                class="w-auto h-full object-contain mx-auto p-4 rounded-3xl"
                            />
                        </div>

                        <!-- Slide 5 -->
                        <div
                            class="slide absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0"
                        >
                            <img
                                src="/corpo/WhatsApp Image 2025-08-30 at 13.43.27.jpeg"
                                alt="Paisaje de Urrao - Vista panorámica"
                                class="w-auto h-full object-contain mx-auto p-4 rounded-3xl"
                            />
                        </div>
                    </div>

                    <!-- Navigation Arrows -->
                    <button
                        id="prev-btn"
                        class="absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100"
                        aria-label="Imagen anterior"
                    >
                        <Icon name="tabler/caret-left" class="w-6 h-6" />
                    </button>
                    <button
                        id="next-btn"
                        class="absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100"
                        aria-label="Siguiente imagen"
                    >
                        <Icon name="tabler/caret-right" class="w-6 h-6" />
                    </button>

                    <!-- Slide Indicators -->
                    <div
                        class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-3"
                    >
                        <button
                            class="slide-indicator w-3 h-3 bg-white/50 hover:bg-white/80 rounded-full transition-all duration-300 active"
                            data-slide="0"
                            aria-label="Ir a imagen 1"></button>
                        <button
                            class="slide-indicator w-3 h-3 bg-white/50 hover:bg-white/80 rounded-full transition-all duration-300"
                            data-slide="1"
                            aria-label="Ir a imagen 2"></button>
                        <button
                            class="slide-indicator w-3 h-3 bg-white/50 hover:bg-white/80 rounded-full transition-all duration-300"
                            data-slide="2"
                            aria-label="Ir a imagen 3"></button>
                        <button
                            class="slide-indicator w-3 h-3 bg-white/50 hover:bg-white/80 rounded-full transition-all duration-300"
                            data-slide="3"
                            aria-label="Ir a imagen 4"></button>
                        <button
                            class="slide-indicator w-3 h-3 bg-white/50 hover:bg-white/80 rounded-full transition-all duration-300"
                            data-slide="4"
                            aria-label="Ir a imagen 5"></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="text-center mt-20">
            <div
                class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30 rounded-full backdrop-blur-lg"
            >
                <Icon
                    name="tabler/medal"
                    class="w-6 h-6 text-secondary-400 mr-3"
                />
                <span class="text-white text-lg font-semibold">
                    ¡Prepárate para la aventura más épica de Urrao!
                </span>
            </div>
        </div>
    </div>
</section>

<style>
    @keyframes float {
        0%,
        100% {
            transform: translateY(0px) rotate(0deg);
        }
        50% {
            transform: translateY(-20px) rotate(5deg);
        }
    }

    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    .slide {
        transition: opacity 1s ease-in-out;
    }

    .slide.active {
        opacity: 1;
    }

    .slide-indicator.active {
        background-color: rgb(255 255 255 / 0.9);
        transform: scale(1.2);
    }
</style>

<script>
    // Slideshow functionality
    document.addEventListener("DOMContentLoaded", () => {
        const slides = document.querySelectorAll(
            ".slide",
        ) as NodeListOf<HTMLElement>;
        const indicators = document.querySelectorAll(
            ".slide-indicator",
        ) as NodeListOf<HTMLElement>;
        const prevBtn = document.getElementById(
            "prev-btn",
        ) as HTMLButtonElement | null;
        const nextBtn = document.getElementById(
            "next-btn",
        ) as HTMLButtonElement | null;
        let currentSlide = 0;
        let slideInterval: number | undefined;

        // Function to show slide
        function showSlide(index: number) {
            // Hide all slides
            slides.forEach((slide) => {
                slide.style.opacity = "0";
            });

            // Remove active class from all indicators
            indicators.forEach((indicator) => {
                indicator.classList.remove("active");
            });

            // Show current slide
            slides[index].style.opacity = "1";
            indicators[index].classList.add("active");

            currentSlide = index;
        }

        // Function to go to next slide
        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        // Function to go to previous slide
        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        // Event listeners for navigation buttons
        if (nextBtn) {
            nextBtn.addEventListener("click", nextSlide);
        }

        if (prevBtn) {
            prevBtn.addEventListener("click", prevSlide);
        }

        // Event listeners for indicators
        indicators.forEach((indicator, index: number) => {
            indicator.addEventListener("click", () => {
                showSlide(index);
                resetInterval();
            });
        });

        // Auto-advance slides
        function startInterval() {
            slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
        }

        function resetInterval() {
            clearInterval(slideInterval);
            startInterval();
        }

        // Start auto-advance
        startInterval();

        // Pause auto-advance on hover
        const slideshowContainer = document.getElementById(
            "slideshow-container",
        );
        if (slideshowContainer) {
            slideshowContainer.addEventListener("mouseenter", () => {
                clearInterval(slideInterval);
            });

            slideshowContainer.addEventListener("mouseleave", () => {
                startInterval();
            });
        }

        // Keyboard navigation
        document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowLeft") {
                prevSlide();
                resetInterval();
            } else if (e.key === "ArrowRight") {
                nextSlide();
                resetInterval();
            }
        });

        // Touch/swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        slideshowContainer?.addEventListener("touchstart", (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        slideshowContainer?.addEventListener("touchend", (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // Swipe left - next slide
                    nextSlide();
                } else {
                    // Swipe right - previous slide
                    prevSlide();
                }
                resetInterval();
            }
        }

        // Initialize first slide
        showSlide(0);
    });

    // Add intersection observer for performance
    if ("IntersectionObserver" in window) {
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        // entry.target.classList.add('animate-float');
                    }
                });
            },
            { threshold: 0.1 },
        );

        // Observe cards for animation
        document.addEventListener("DOMContentLoaded", () => {
            const cards = document.querySelectorAll(".group");
            cards.forEach((card) => observer.observe(card));
        });
    }
</script>
