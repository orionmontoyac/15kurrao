---
import Image from "astro/components/Image.astro";
const images = await Astro.glob("src/assets/images/hero-banner/*").then(
    (files) => {
        return files.map((file) => file.default);
    },
);
console.log("images");
---

<section class="relative overflow-y-hidden">
    <!-- right fade-out -->
    <div
        class="absolute -right-px top-0 z-10 h-screen w-[100%] bg-gradient-to-r from-transparent to-black to-80% hidden md:block"
    >
    </div>
    <ul class="slideshow absolute">
        {
            images.map((image) => (
                <li>
                    <span>
                        <Image
                            width={1920}
                            class="object-cover object-[center_20%] w-full h-full"
                            src={image}
                            alt=""
                            loading="lazy"
                        />
                    </span>
                </li>
            ))
        }
    </ul>
    <style>
        .slideshow {
            list-style-type: none;
        }

        /** SLIDESHOW **/
        .slideshow,
        .slideshow:after {
            top: -16px; /*Not sure why I needed this fix*/
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0px;
            z-index: -1;
        }

        .slideshow li span {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            color: transparent;
            background-size: cover;
            background-position: 50% 50%;
            background-repeat: no-repeat;
            opacity: 0;
            z-index: 0;
            animation: imageAnimation 50s linear infinite 0s;
        }

        .slideshow li:nth-child(1) span {
            /* background-image: url("/hero_banner/ESM_2431-2.jpg"); */
        }
        .slideshow li:nth-child(2) span {
            /* background-image: url("/hero_banner/ESM_2453-2.jpg"); */
            animation-delay: 10s;
        }
        .slideshow li:nth-child(3) span {
            /* background-image: url("/hero_banner/ESM_2489-2.jpg"); */
            animation-delay: 20s;
        }
        .slideshow li:nth-child(4) span {
            /* background-image: url("/hero_banner/IMG_4207.jpg"); */
            animation-delay: 30s;
        }
        .slideshow li:nth-child(5) span {
            /* background-image: url("/hero_banner/IMG_4666.jpg"); */
            background-position: center 20%;
            animation-delay: 40s;
        }

        @keyframes imageAnimation {
            0% {
                opacity: 0;
                transform: scale(1);
                animation-timing-function: ease-in;
            }
            8% {
                opacity: 1;
                transform: scale(1.05);
                animation-timing-function: ease-out;
            }
            17% {
                opacity: 1;
                transform: scale(1.1);
            }
            25% {
                opacity: 0;
                transform: scale(1.15);
            }
            100% {
                opacity: 0;
                transform: scale(1.2);
            }
        }

        .no-cssanimations .cb-slideshow li span {
            opacity: 1;
        }
    </style>
</section>
